library(scales)
list.files("Fuentes/")
Individual_t117 <-
read.table("Fuentes/usu_individual_t117.txt",
sep = ";",
dec = ",",
header = TRUE,
fill = TRUE )
Aglom <- openxlsx::read.xlsx("Fuentes/Aglomerados EPH.xlsx")
Datos  <- Individual_t117[c("AGLOMERADO","MAS_500","CH04","CH06","P47T","PONDERA","PONDII")]
summary(Datos)
unique(Datos$AGLOMERADO)
sample_n(tbl = Datos,size = 9)
View(Aglom)
View(Datos)
---
title: "TP ASET ORSINI"
library(tidyverse)
library(openxlsx)
library(eph)
library(scales)
library(ggplot2)
library(tidyverse)
library(openxlsx)
library(eph)
library(scales)
library(ggplot2)
library(dbplyr)
library(tidyverse)
library(openxlsx)
library(eph)
library(scales)
library(ggplot2)
library(dplyr)
base <- eph::get_microdata(2024,3)
library(tidyverse)
library(openxlsx)
library(eph)
library(scales)
list.files("Fuentes/")
Aglom <- openxlsx::read.xlsx("Fuentes/Aglomerados EPH.xlsx")
View(Aglom)
View(Aglom)
Tasas <- base %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA) %>%
select(-(1:8)) # Elimino los niveles poblacionales
View(Tasas)
library(tidyverse)
library(openxlsx)
library(eph)
library(scales)
library(ggplot2)
library(dplyr)
library(knitr)
library(tidyverse)
library(openxlsx)
library(eph)
library(scales)
library(ggplot2)
library(dplyr)
library(knitr)
library(tidyverse)
library(openxlsx)
library(eph)
library(scales)
library(ggplot2)
library(dplyr)
library(knitr)
kable(Tasas, format = "markdown")
library(tidyverse)
library(openxlsx)
library(eph)
library(scales)
library(ggplot2)
library(dplyr)
library(knitr)
base <- eph::get_microdata(2024,3)
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base %>%
group_by(Aglom) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
View(Aglom)
View(base)
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base %>%
group_by(AGLOMERADO) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
tasas_aglomerados_presentacion <- tasas_aglomerados  %>%
left_join(AGLOMERADO) %>%
select(AGLOMERADO,everything(),-AGLOMERADO)
View(tasas_aglomerados)
View(tasas_aglomerados)
View(tasas_aglomerados)
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base %>%
group_by(AGLOMERADO) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
tasas_AGLOMERADOS_presentacion <- tasas_aglomerados  %>%
left_join(Nom_Aglo) %>%
select(AGLOMERADO,everything(),-REGION)
knitr::opts_chunk$set(include = FALSE)
# Tasas Básicas Regiones
tasas_regiones <- Individual_t117 %>%
group_by(REGION) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable la region)
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base %>%
group_by(Nom_Aglo) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base %>%
group_by(AGLOMERADO) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base %>%
group_by(AGLOMERADO) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
View(tasas_aglomerados)
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base %>%
group_by(Aglom) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base %>%
group_by(AGLOMERADO) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base %>%
group_by(AGLOMERADO) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
print tasas_aglomerados
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base %>%
group_by(AGLOMERADO) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
kable(tasas_aglomerados), format = "markdown")
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base %>%
group_by(AGLOMERADO) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
kable(tasas_aglomerados, format = "markdown")
View(Aglom)
base <- base %>%
mutate(AGLOMERADO = recode(aglomerado_n,
"2" = "Gran la Plata"
"3" = "Bahía Blanca –Cerri",
base <- base %>%
mutate(AGLOMERADO = recode(aglomerado_n,
"2" = "Gran la Plata",
"3" = "Bahía Blanca –Cerri",
"4"= "Gran Rosario",
"5"= "Gran Santa Fé”,
“6” = “Gran Paraná”,
“7” = “Posadas”,
“8” = “Gran Resistencia”
“9” = “Cdro. Rivadavia - R.Tilly”,
"10" = "Gran Mendoza",
base <- base %>%
mutate(AGLOMERADO = recode(aglomerado_n,
"2" = "Gran la Plata",
"3" = "Bahía Blanca –Cerri",
"4"= "Gran Rosario",
"5"= "Gran Santa Fé”,
“6” = “Gran Paraná”,
“7” = “Posadas”,
“8” = “Gran Resistencia”
“9” = “Cdro. Rivadavia - R.Tilly”,
"10" = "Gran Mendoza",
base1 <- base %>%
mutate(AGLOMERADO = recode(AGLOMERADO,
"2" = "Gran la Plata",
"3" = "Bahía Blanca –Cerri",
"4"= "Gran Rosario",
"5"= "Gran Santa Fé",
"6" = "Gran Paraná",
"7" = "Posadas",
"8" = "Gran Resistencia",
"9" = "Cdro. Rivadavia - R.Tilly",
"10" = "Gran Mendoza",
"12" = "Corrientes",
"13" = "Gran Córdoba",
"14" = "Concordia",
"15" = "Formosa",
"17" = "Neuquén – Plottier",
"18" = "S.del Estero - La Banda",
"19" = "Jujuy - Palpalá",
"20" = "Río Gallegos",
"22" = "Gran Catamarca",
"23" = "Salta",
"25" = "La Rioja",
"26" = "San Luis - El Chorrillo",
"27" = "Gran San Juan",
"29" = "Gran Tucumán - T. Viejo",
"30" = "Santa Rosa - Toay" ,
"31" = "Ushuaia - Río Grande",
"32" = "Ciudad de Bs As",
"33" = "Partidos del GBA",
"34" = "Mar del Plata - Batán",
"36" = "Río Cuarto",
"38" = "San Nicolás – Villa Constitución",
"91" = "Rawson – Trelew",
"93"="Viedma – Carmen de Patagones"))
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base1 %>%
group_by(AGLOMERADO) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
kable(tasas_aglomerados, format = "markdown")
library(tidyverse)
library(openxlsx)
library(eph)
library(scales)
library(ggplot2)
library(dplyr)
library(knitr)
base <- eph::get_microdata(2024,3)
list.files("Fuentes/")
Aglom <- openxlsx::read.xlsx("Fuentes/Aglomerados EPH.xlsx")
Tasas <- base %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA) %>%
select(-(1:8)) # Elimino los niveles poblacionales
kable(Tasas, format = "markdown")
base1 <- base %>%
mutate(AGLOMERADO = recode(AGLOMERADO,
"2" = "Gran la Plata",
"3" = "Bahía Blanca –Cerri",
"4"= "Gran Rosario",
"5"= "Gran Santa Fé",
"6" = "Gran Paraná",
"7" = "Posadas",
"8" = "Gran Resistencia",
"9" = "Cdro. Rivadavia - R.Tilly",
"10" = "Gran Mendoza",
"12" = "Corrientes",
"13" = "Gran Córdoba",
"14" = "Concordia",
"15" = "Formosa",
"17" = "Neuquén – Plottier",
"18" = "S.del Estero - La Banda",
"19" = "Jujuy - Palpalá",
"20" = "Río Gallegos",
"22" = "Gran Catamarca",
"23" = "Salta",
"25" = "La Rioja",
"26" = "San Luis - El Chorrillo",
"27" = "Gran San Juan",
"29" = "Gran Tucumán - T. Viejo",
"30" = "Santa Rosa - Toay" ,
"31" = "Ushuaia - Río Grande",
"32" = "Ciudad de Bs As",
"33" = "Partidos del GBA",
"34" = "Mar del Plata - Batán",
"36" = "Río Cuarto",
"38" = "San Nicolás – Villa Constitución",
"91" = "Rawson – Trelew",
"93"="Viedma – Carmen de Patagones"))
# Tasas Básicas por Aglomerados
tasas_aglomerados <- base1 %>%
group_by(AGLOMERADO) %>%
summarise(Poblacion         = sum(PONDERA),
Ocupados          = sum(PONDERA[ESTADO == 1]),
Desocupados       = sum(PONDERA[ESTADO == 2]),
PEA               = Ocupados + Desocupados,
Ocupados_demand   = sum(PONDERA[ESTADO == 1 & PP03J == 1]),
Suboc_demandante  = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J == 1]),
Suboc_no_demand   = sum(PONDERA[ESTADO == 1 & INTENSI == 1 & PP03J %in% c(2, 9)]),
Subocupados       = Suboc_demandante + Suboc_no_demand,
'Tasa Actividad'                  = PEA/Poblacion,
'Tasa Empleo'                     = Ocupados/Poblacion,
'Tasa Desocupacion'               = Desocupados/PEA,
'Tasa ocupados demandantes'       = Ocupados_demand/PEA,
'Tasa Subocupación'               = Subocupados/PEA,
'Tasa Subocupación demandante'    = Suboc_demandante/PEA,
'Tasa Subocupación no demandante' = Suboc_no_demand/PEA)%>%
ungroup() %>%  #Desagrupo el data.frame para poder seguir operando tranquilo sobre el mismo
select(-(2:9)) # Elimino los niveles poblacionales (ahora tengo como 1er variable el aglomerado)
kable(tasas_aglomerados, format = "markdown")
